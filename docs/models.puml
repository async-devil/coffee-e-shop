@startuml models


/' User '/


class User {
  id : string
  type : UserType
  full_name : string
  email : string
  phone : string
  password : string
  create_date : string
}

enum UserType {
  CUSTOMER
  ADMINISTRATOR
}


User --> UserType


/' Product '/


class Product {
  id : string
  category : Category
  title : string
  brand : string
  description : string
  preview_description : string
  images : string[]
  variations_name : string
  variations : ProductVariation[]
  options : ProductOption[]
  archived : boolean
}

note right of Product::description
  HTML text
end note
note right of Product::images
  S3 links
end note


class ProductVariation {
  title : string
  price : string
  available : boolean
}

class ProductOption {
  name : string
  values : string[]
}


Product --> ProductVariation
Product --> ProductOption
Product --> Category


/' Category '/


class Category {
  id : string
  parent_category : Category | null
  name : string
  description : string
}


/' Order '/


class Order {
  id : string
  owner : User
  items : OrderItem[]
  status : OrderStatus
  total : string
  create_date : string
}

enum OrderStatus {
  CREATED
  PAID
  DELIVERING
  CANCELED
  COMPLETED
}


class OrderItem {
  product : Product
  selected_variation : ProductVariation
  selected_options : ProductOption[]
  quantity : number
}


Order --> User
Order --> OrderItem
Order --> OrderStatus

OrderItem --> Product
OrderItem --> ProductVariation
OrderItem --> ProductOption


/' Cart '/


class Cart {
  id : string
  owner : User
  items : OrderItem[]
}

note right of Cart::owner_id
  Handled only for registered users.
  If not, client side only
end note


Cart --> User
Cart --> OrderItem

@enduml
